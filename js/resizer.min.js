function isURL(e){return pattern=/^(http|https):\/\/(([a-zA-Z0-9$\-_.+!*'(),;:&=]|%[0-9a-fA-F]{2})+@)?(((25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])(\.(25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])){3})|localhost|([a-zA-Z0-9\-\u00C0-\u017F]+\.)+([a-zA-Z]{2,}))(:[0-9]+)?(\/(([a-zA-Z0-9$\-_.+!*'(),;:@&=]|%[0-9a-fA-F]{2})*(\/([a-zA-Z0-9$\-_.+!*'(),;:@&=]|%[0-9a-fA-F]{2})*)*)?(\?([a-zA-Z0-9$\-_.+!*'(),;:@&=\/?]|%[0-9a-fA-F]{2})*)?(\#([a-zA-Z0-9$\-_.+!*'(),;:@&=\/?]|%[0-9a-fA-F]{2})*)?)?$/,pattern.test(e)}var ruler_class,form_structure,screen,max_size,pattern,url,dataString,guide_size,current_device,capture_url,valid_url,resizer_active,main,submit_btn;resizer_active=!1,main=$(".main"),$("form").submit(function(){return url=$("#url").val(),valid_url="",submit_btn=$("#submitted"),isURL(url)?(valid_url=url,dataString="url="+url,dataString+=0==resizer_active?"&resize=true":"&resize=false",submit_btn.val("TRUE"),dataString+="&submitted="+submit_btn.val()):dataString=null,null!=dataString&&$.ajax({type:"POST",url:"resizer_submit.php",data:dataString,cache:!0,success:function(e){main.append(e),1==resizer_active&&$(".device iframe").attr("src",valid_url)}}),main.hasClass("resizer-field-active")&&main.removeClass("resizer-field-active"),!1}),$("body").on("resizer",function(e,t){"undefined"==typeof t&&(t=""),0==$("#url").val().length&&$("#url").val(t),$("#url").focus(function(){$(".main").addClass("resizer-field-active")}).blur(function(){$(".main").removeClass("resizer-field-active")})}),$("body").on("resize_active",function(){$(".full-form").removeClass("full-form").addClass("resizer-filter"),form_structure=$(".resizer-filter fieldset").html(),$(".resizer-filter form").append(form_structure),$(".resizer-filter form > fieldset").remove(),$(".resizer-filter form > legend").remove(),$("body").trigger("resizer",[url]),screen=$(window).outerWidth(!0),$(".screen-width .guide-start").prepend(screen),$(".screen-width .guide-end").append(screen),max_size=$(".default-size span.guide-start").text()+"px",$(".device").css("width",max_size),$(".guide").click(function(){$(this).hasClass("guide-active")||(null==current_device&&(current_device=$(".device").attr("class")),$(this).hasClass("screen-width")?$(".device").attr("class",current_device):(guide_size=$(this).attr("class"),guide_size=guide_size.split(" "),guide_size=current_device+" "+guide_size[2]+"-device",$(".device").attr("class",guide_size)),$(".guide-active").removeClass("guide-active"),$(this).addClass("guide-active"))}),$(".ruler span i").click(function(e){e.stopPropagation(),width=$(this).parent("span").text(),width=parseInt(width),height=$(window).outerHeight(!0),height=parseInt(height),specs="location=no, scrollbar=no, menubar=no, toolbars=no, resizable=yes, left=0, top=0, width="+width+", height="+height,url="resizable.php?url="+$("iframe").attr("src"),e.preventDefault(),window.open(url,width,specs)}),resizer_active=!0,$(".devices-option a").click(function(){$(this).closest("li").addClass("devices-active"),$(this).closest("li").siblings().each(function(){$(this).removeClass("devices-active")}),url=$(".capture_url").text(),device=$(this).attr("title"),device=device.replace(" ","_"),isURL(url)?(dataString="url="+url,dataString+=0==resizer_active?"&resize=true":"&resize=false",dataString+="&device="+device):dataString=null,null!=dataString&&$.ajax({type:"POST",url:"resizer_submit.php",data:dataString,cache:!0,success:function(e){main.append(e),ruler_class=device.replace("_Screens",""),device_class="device "+ruler_class.toLowerCase()+"-device",ruler_class="ruler "+ruler_class.toLowerCase()+"-ruler",$(".ruler").attr("class",ruler_class),$(".ruler").attr("width",ruler_class),$(".device").attr("class",device_class)}})}),$(".refresh").click(function(){var e=url+"?ver="+Math.floor(1e5*Math.random()+1);$("iframe").attr("src",e)}),$(".capture").click(function(e){width=$(".guide-active .guide-start").text(),height=$(window).outerHeight(!0),specs="location=no, scrollbar=no, menubar=no, toolbars=no, resizable=yes, left=0, top=0, width="+width+", height="+height,capture_url="capture.php?url="+$("iframe").attr("src")+"&w="+width+"&h="+height,e.preventDefault(),window.open(capture_url,width,specs)}),$(".resize-widget a").click(function(){$(this).closest(".resize-widget").toggleClass("resize-widget-active")})});